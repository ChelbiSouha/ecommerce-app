<div class="products-page">
  <h2>
    <mat-icon color="primary">storefront</mat-icon>
    Catalogue de Produits
  </h2>

  <!-- Filters and Sorting -->
  <div class="filters">
    <!-- Category Filter -->
   <mat-form-field appearance="outline">
  <mat-label>Cat√©gorie</mat-label>
  <mat-select [(value)]="selectedCategory" (selectionChange)="applyFilters()">
    <mat-option value="">Toutes</mat-option>
    <mat-option *ngFor="let c of categories" [value]="c.id">
      {{ c.name }}
    </mat-option>
  </mat-select>
</mat-form-field>




    <!-- Rating Filter -->
    <mat-form-field appearance="outline">
      <mat-label>Note minimum</mat-label>
      <mat-select [(value)]="ratingFilter" (selectionChange)="applyFilters()" aria-label="Filtrer par note">
        <mat-option value="0">Toutes</mat-option>
        <mat-option *ngFor="let r of [1,2,3,4,5]" [value]="r">
          {{ r }} √©toile{{ r > 1 ? 's' : '' }}
        </mat-option>
      </mat-select>
    </mat-form-field>

    <!-- Sorting -->
    <mat-form-field appearance="outline">
      <mat-label>Trier par</mat-label>
      <mat-select [(value)]="sortOption" (selectionChange)="applySort()" aria-label="Trier les produits">
        <mat-option value="">Par d√©faut</mat-option>
        <mat-option value="priceAsc">Prix croissant</mat-option>
        <mat-option value="priceDesc">Prix d√©croissant</mat-option>
        <mat-option value="popularity">Popularit√©</mat-option>
        <mat-option value="newest">Nouveaut√©s</mat-option>
      </mat-select>
    </mat-form-field>
  </div>

  <!-- Product Grid -->
  <div *ngIf="paginatedProducts.length; else emptyState" class="grid">
    <app-product-card
      *ngFor="let product of paginatedProducts"
      [product]="product"
      class="product-card"
    ></app-product-card>
  </div>

  <!-- Empty State -->
  <ng-template #emptyState>
    <div class="empty-state">
      <mat-icon>search_off</mat-icon>
      <p>Aucun produit trouv√© üò¢</p>
    </div>
  </ng-template>

  <!-- Pagination -->
  <div class="pagination" *ngIf="totalPages > 1">
    <button mat-stroked-button color="primary" (click)="prevPage()" [disabled]="page === 1" aria-label="Page pr√©c√©dente">
      <mat-icon>chevron_left</mat-icon> Pr√©c√©dent
    </button>

    <span>Page {{ page }} / {{ totalPages }}</span>

    <button mat-stroked-button color="primary" (click)="nextPage()" [disabled]="page === totalPages" aria-label="Page suivante">
      Suivant <mat-icon>chevron_right</mat-icon>
    </button>
  </div>
</div>
