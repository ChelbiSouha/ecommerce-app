<div class="products-page">
  <h2>
    <mat-icon color="primary">storefront</mat-icon>
    Catalogue de Produits
  </h2>

  <!-- Filtres et tri -->
  <div class="filters">
    <mat-form-field appearance="outline">
      <mat-label>Catégorie</mat-label>
      <mat-select [(value)]="selectedCategory" (selectionChange)="applyFilters()">
        <mat-option value="">Toutes</mat-option>
        <mat-option *ngFor="let c of categories" [value]="c">{{ c }}</mat-option>
      </mat-select>
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Note minimum</mat-label>
      <mat-select [(value)]="ratingFilter" (selectionChange)="applyFilters()">
        <mat-option value="0">Toutes</mat-option>
        <mat-option *ngFor="let r of [1,2,3,4,5]" [value]="r">{{r}} étoile{{r>1?'s':''}}</mat-option>
      </mat-select>
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Trier par</mat-label>
      <mat-select [(value)]="sortOption" (selectionChange)="applySort()">
        <mat-option value="">Par défaut</mat-option>
        <mat-option value="priceAsc">Prix croissant</mat-option>
        <mat-option value="priceDesc">Prix décroissant</mat-option>
        <mat-option value="popularity">Popularité</mat-option>
        <mat-option value="newest">Nouveautés</mat-option>
      </mat-select>
    </mat-form-field>
  </div>

  <!-- Grille de produits -->
  <div class="grid">
    <app-product-card
      *ngFor="let product of paginatedProducts"
      [product]="product"
      class="product-card"
    ></app-product-card>
  </div>

  <!-- Pagination -->
  <div class="pagination">
    <button mat-stroked-button color="primary" (click)="prevPage()" [disabled]="page===1">
      <mat-icon>chevron_left</mat-icon> Précédent
    </button>

    <span>Page {{page}} / {{totalPages}}</span>

    <button mat-stroked-button color="primary" (click)="nextPage()" [disabled]="page===totalPages">
      Suivant <mat-icon>chevron_right</mat-icon>
    </button>
  </div>
</div>
